

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.2.4.7. SyntaxError &mdash; METplus 3.1 documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://dtcenter.github.io/METplus/latest/generated/model_applications/medium_range/TCStat_SeriesAnalysis_fcstGFS_obsGFS_FeatureRelative_SeriesByLead_PyEmbed_IVT.html"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/theme_override.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/gallery.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/gallery-binder.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/gallery-dataframe.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="METplus 3.1 documentation" href="../../../index.html"/>
        <link rel="up" title="5.2. Model Applications" href="../index.html"/>
        <link rel="next" title="5.2.5.1. MTD: 6hr QPF Use Case" href="../precipitation/MTD_fcstHRRR-TLE_obsMRMS.html"/>
        <link rel="prev" title="5.2.4.6. Point-Stat: Standard Verification for CONUS Surface" href="PointStat_fcstGFS_obsNAM_Sfc_MultiField_PrepBufr.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> METplus
          

          
            
            <img src="../../../_static/METplus_logo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                
                  <div class="version-dropdown">
                    <select class="version-list" id="version-list">
                      <option value=''>3.1</option>
                      
                        
                          <option value="../latest">latest</option>
                        
                      
                        
                          <option value="../develop">develop</option>
                        
                      
                    </select>
                  </div>
                
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">METplus Wrappers Guides</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../Users_Guide/index.html">User’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../Users_Guide/overview.html">1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Users_Guide/installation.html">2. Software Installation/Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Users_Guide/systemconfiguration.html">3. System Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Users_Guide/wrappers.html">4. Python Wrappers</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../Users_Guide/usecases.html">5. METplus Use Cases</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../met_tool_wrapper/index.html">5.1. MET tools</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">5.2. Model Applications</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../index.html#climate">5.2.1. Climate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#convection-allowing-models">5.2.2. Convection Allowing Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#cryosphere">5.2.3. Cryosphere</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../index.html#medium-range">5.2.4. Medium Range</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#precipitation">5.2.5. Precipitation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#subseasonal-to-seasonal">5.2.6. Subseasonal to Seasonal</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#space-weather">5.2.7. Space Weather</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#tropical-cyclone-and-extra-tropical-cyclone">5.2.8. Tropical Cyclone and Extra Tropical Cyclone</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../Users_Guide/references.html">6. References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Users_Guide/quicksearch.html">7. METplus Quick Search for Use Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Users_Guide/glossary.html">8. METplus Configuration Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Users_Guide/index.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Contributors_Guide/index.html">Contributor’s Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">METplus</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../Users_Guide/index.html">User’s Guide</a> &raquo;</li>
        
          <li><a href="../../../Users_Guide/usecases.html"><span class="section-number">5. </span>METplus Use Cases</a> &raquo;</li>
        
          <li><a href="../index.html"><span class="section-number">5.2. </span>Model Applications</a> &raquo;</li>
        
      <li><span class="section-number">5.2.4.7. </span>SyntaxError</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/generated/model_applications/medium_range/TCStat_SeriesAnalysis_fcstGFS_obsGFS_FeatureRelative_SeriesByLead_PyEmbed_IVT.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<div class="sphx-glr-example-title section" id="syntaxerror">
<span id="sphx-glr-generated-model-applications-medium-range-tcstat-seriesanalysis-fcstgfs-obsgfs-featurerelative-seriesbylead-pyembed-ivt-py"></span><h1><span class="section-number">5.2.4.7. </span>SyntaxError<a class="headerlink" href="#syntaxerror" title="Permalink to this headline">¶</a></h1>
<p>Example script with invalid Python syntax</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Multi_Tool: Feature Relative by Lead using User-Defined Fields</span>
<span class="sd">========================================================================</span>

<span class="sd">model_applications/medium_range/</span>
<span class="sd">TCStat_SeriesAnalysis_fcstGFS</span>
<span class="sd">_obsGFS_FeatureRelative</span>
<span class="sd">_SeriesByLead_PyEmbed_IVT.conf</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="o">========================================================================</span>
<span class="n">This</span> <span class="n">use</span> <span class="n">case</span> <span class="n">calls</span> <span class="n">multiple</span> <span class="n">tools</span> <span class="n">to</span> <span class="n">produce</span> <span class="n">diagnostic</span> <span class="n">plots</span> <span class="n">of</span> <span class="n">systematic</span> <span class="n">erros</span> <span class="n">relative</span> <span class="n">to</span> <span class="n">a</span>
<span class="n">feature</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="n">hurricane</span><span class="p">,</span> <span class="n">MCS</span><span class="p">,</span> <span class="n">etc</span><span class="o">...</span><span class="p">)</span><span class="o">.</span> <span class="n">This</span> <span class="n">use</span> <span class="n">case</span> <span class="n">calls</span> <span class="n">a</span> <span class="n">user</span> <span class="n">provided</span> <span class="n">python</span> <span class="n">script</span> <span class="n">that</span>
<span class="n">calculates</span> <span class="n">a</span> <span class="n">diagnostic</span> <span class="n">of</span> <span class="n">interest</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="n">integrated</span> <span class="n">vapor</span> <span class="n">transport</span><span class="p">,</span> <span class="n">potential</span> <span class="n">vorticity</span><span class="p">,</span> <span class="n">etc</span><span class="o">...</span><span class="p">)</span><span class="o">.</span>
<span class="n">This</span> <span class="n">user</span> <span class="n">diagnostic</span> <span class="ow">is</span> <span class="n">then</span> <span class="n">used</span> <span class="n">to</span> <span class="n">define</span> <span class="n">the</span> <span class="n">systematic</span> <span class="n">errors</span><span class="o">.</span> <span class="n">This</span> <span class="n">example</span> <span class="n">calculates</span> <span class="n">statistics</span>
<span class="n">over</span> <span class="n">varying</span> <span class="n">forecast</span> <span class="n">leads</span> <span class="k">with</span> <span class="n">the</span> <span class="n">ability</span> <span class="n">to</span> <span class="n">define</span> <span class="n">lead</span> <span class="n">groupings</span><span class="o">.</span> <span class="n">This</span> <span class="n">use</span> <span class="n">case</span> <span class="ow">is</span> <span class="n">very</span> <span class="n">similar</span>
<span class="n">to</span> <span class="n">the</span> <span class="n">Multi_Tools</span><span class="p">:</span> <span class="n">Feature</span> <span class="n">Relative</span> <span class="n">by</span> <span class="n">Lead</span> <span class="n">use</span> <span class="n">case</span><span class="o">.</span>
<span class="p">(</span><span class="n">ADeck</span><span class="p">,</span><span class="n">GFS</span><span class="p">:</span><span class="n">BDeck</span><span class="p">,</span><span class="n">GFS</span><span class="p">:</span><span class="n">ATCF</span><span class="p">,</span><span class="n">Grib2</span><span class="p">)</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
<div class="section" id="scientific-objective">
<h2>Scientific Objective<a class="headerlink" href="#scientific-objective" title="Permalink to this headline">¶</a></h2>
<p>By maintaining focus of each evaluation time (or evaluation time series, in this case)
on a user-defined area around a cyclone, the model statistical errors associated
with cyclonic physical features (moisture flux, stability, strength of upper-level
PV anomaly and jet, etc.) can be related directly to the model forecasts and provide
improvement guidance by accurately depicting interactions with significant weather
features around and within the cyclone. This is in contrast to the traditional
method of regional averaging cyclone observations in a fixed grid, which
“smooths out” system features and limits the meaningful metrics that can be gathered.
Specifically, this use case creates bins of forecast lead times as specified by the
given ranges which provides additional insight directly into forecast lead time accuracy.</p>
<p>Additionally, the ability to calculate model statistical errors based on user provided diagnostics
allows the user to customize the feature relative analysis to suit their needs.</p>
</div>
<div class="section" id="datasets">
<h2>Datasets<a class="headerlink" href="#datasets" title="Permalink to this headline">¶</a></h2>
<p>This use case compares the Global Forecast System (GFS) forecast to the GFS analysis for
hurricane Dorian. It is based on the user provided python script that calculates the diagnostic
integrated vaport transport (IVT).</p>
<blockquote>
<div><ul class="simple">
<li><p>Variables required to calculate IVT:
Levels required: all pressure levels &lt;= 100mb
#. Temperature
#. v- component of wind
#. u- component of wind
#. Geopotential height
#. Specific humidity OR Relative Humidity</p></li>
<li><p>Forecast dataset: GFS Grid 4 Forecast
GFS Forecast data can be found at the following website: <a class="reference external" href="https://www.ncdc.noaa.gov/data-access/model-data/model-datasets/global-forcast-system-gfs">https://www.ncdc.noaa.gov/data-access/model-data/model-datasets/global-forcast-system-gfs</a>
- Initialization date: 20190830
- Initialization hours: 00, 06, 12, 18 UTC
- Lead times: 90, 96, 102, 108, 114
- Format: Grib2
- Resolution: 0.5 degree</p></li>
<li><p>Observation dataset: GFS Grid 4 Analysis
GFS Analysis data can be found at the following website: <a class="reference external" href="https://www.ncdc.noaa.gov/data-access/model-data/model-datasets/global-forcast-system-gfs">https://www.ncdc.noaa.gov/data-access/model-data/model-datasets/global-forcast-system-gfs</a>
- Valid date/time range: 20190902_18 - 20190904_12 every 6 hours
- Format: Grib2
- Resolution: 0.5 degree</p></li>
<li><p>Hurricane Track Data
Hurricane track data can be found at the following website: <a class="reference external" href="http://hurricanes.ral.ucar.edu/repository/data/">http://hurricanes.ral.ucar.edu/repository/data/</a>
- ADeck Track File: aal052019.dat
- BDeck Track File: bal052019.dat</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="metplus-components">
<h2>METplus Components<a class="headerlink" href="#metplus-components" title="Permalink to this headline">¶</a></h2>
<p>This use case first runs PyEmbedIngest to run the user provided python scripts to calculate the
desired diagnostic (in this example, IVT). PyEmbedIngest runs the RegridDataPlane tool to write
IVT to a MET readable netCDF file. Then TCPairs and ExtractTiles are run to generate matched
tropical cyclone data and regrid them into appropriately-sized tiles along a storm track.
The MET tc-stat tool is used to filter the track data and the MET regrid-dataplane tool is used to
regrid the data (GRIB1 or GRIB2 into netCDF). Next, a series analysis by lead time is performed on
the results and plots (.ps and .png) are generated for all variable-level-stat combinations from
the specified variables, levels, and requested statistics. If lead grouping is turned on, the final
results are aggregated into forecast hour groupings as specified by the start, end and increment in
the METplus configuration file, as well as labels to identify each forecast hour grouping. If lead
grouping is not turned out, the final results will be written out for each requested lead time.</p>
</div>
<div class="section" id="metplus-workflow">
<h2>METplus Workflow<a class="headerlink" href="#metplus-workflow" title="Permalink to this headline">¶</a></h2>
<p>This use case loops by process which means that each tool is run for all times before moving to the
next tool. The tool order is as follows:</p>
<p>PyEmbedIngest, TCPairs, ExtractTiles, SeriesByLead</p>
<p>This example loops by forecast/lead time (with begin, end, and increment as specified in the METplus TCStat_SeriesAnalysis_fcstGFS_obsGFS_FeatureRelative_SeriesByLead_PyEmbed_IVT.conf file).</p>
<p>4 initialization times will be run over 5 lead times:</p>
<div class="line-block">
<div class="line"><strong>Init:</strong> 20190830_00Z</div>
<div class="line"><strong>Forecast lead:</strong> 90, 96, 102, 108, 114</div>
</div>
<div class="line-block">
<div class="line"><strong>Init:</strong> 20190830_06Z</div>
<div class="line"><strong>Forecast lead:</strong> 90, 96, 102, 108, 114</div>
</div>
<div class="line-block">
<div class="line"><strong>Init:</strong> 20190830_12Z</div>
<div class="line"><strong>Forecast lead:</strong> 90, 96, 102, 108, 114</div>
</div>
<div class="line-block">
<div class="line"><strong>Init:</strong> 20190830_18Z</div>
<div class="line"><strong>Forecast lead:</strong> 90, 96, 102, 108, 114</div>
</div>
</div>
<div class="section" id="metplus-configuration">
<h2>METplus Configuration<a class="headerlink" href="#metplus-configuration" title="Permalink to this headline">¶</a></h2>
<p>METplus first loads all of the configuration files found in parm/metplus_config,
then it loads any configuration files passed to METplus via the command line
with the -c option, i.e. -c parm/use_cases/model_applications/medium_range/TCStat_SeriesAnalysis_fcstGFS_obsGFS_FeatureRelative_SeriesByLead_PyEmbed_IVT.conf</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1">#  CONFIGURATION</span>
<span class="c1">#</span>
<span class="o">[</span>config<span class="o">]</span>

<span class="c1"># Loop over each process in the process list (set in PROCESS_LIST) for all times in the time window of interest.</span>
<span class="nv">LOOP_ORDER</span> <span class="o">=</span> processes

<span class="c1">#Configuration files</span>
<span class="nv">TC_PAIRS_CONFIG_FILE</span> <span class="o">=</span> <span class="o">{</span>CONFIG_DIR<span class="o">}</span>/TCPairsETCConfig_IVT
<span class="nv">TC_STAT_CONFIG_FILE</span> <span class="o">=</span> <span class="o">{</span>CONFIG_DIR<span class="o">}</span>/TCStatConfig_IVT
<span class="nv">SERIES_ANALYSIS_CONFIG_FILE</span> <span class="o">=</span> <span class="o">{</span>CONFIG_DIR<span class="o">}</span>/SeriesAnalysisConfig_IVT

<span class="nv">PROCESS_LIST</span> <span class="o">=</span> PyEmbedIngest, TCPairs, ExtractTiles, SeriesByLead

<span class="nv">SERIES_ANALYSIS_REGRID_TO_GRID</span> <span class="o">=</span> FCST

<span class="c1"># NOTE: &quot;TOTAL&quot; is a REQUIRED cnt statistic used by the series analysis scripts</span>
<span class="nv">SERIES_ANALYSIS_STAT_LIST</span> <span class="o">=</span> TOTAL, FBAR, OBAR, ME

<span class="c1"># The init time begin and end times, increment</span>
<span class="c1"># Looping - options are INIT, VALID, RETRO, and REALTIME </span>
<span class="nv">LOOP_BY</span> <span class="o">=</span> INIT

<span class="c1"># Format of INIT_BEG and INIT_END</span>
<span class="nv">INIT_TIME_FMT</span> <span class="o">=</span> %Y%m%d%H

<span class="c1"># Start time for METplus run</span>
<span class="nv">INIT_BEG</span> <span class="o">=</span> <span class="m">2019083000</span>

<span class="c1"># End time for METplus run</span>
<span class="nv">INIT_END</span> <span class="o">=</span> <span class="m">2019083023</span>

<span class="c1"># This is the step-size. Increment in seconds from the begin time to the end time</span>
<span class="nv">INIT_INCREMENT</span> <span class="o">=</span> <span class="m">21600</span> <span class="p">;;</span> <span class="nb">set</span> to every <span class="m">6</span> <span class="nv">hours</span><span class="o">=</span><span class="m">21600</span> seconds

<span class="c1"># A list of times to include, in format YYYYMMDD_hh</span>
<span class="nv">INIT_INCLUDE</span> <span class="o">=</span> 20190830_00, 20190830_06, 20190830_12, 20190830_18

<span class="c1"># A list of times to exclude, in format YYYYMMDD_hh</span>
<span class="nv">INIT_EXCLUDE</span> <span class="o">=</span>

<span class="c1"># Specify model valid time window in format YYYYMM[DD[_hh]].  Only tracks</span>
<span class="c1"># that fall within the valid time window will be used.</span>
<span class="nv">VALID_BEG</span> <span class="o">=</span> 
<span class="nv">VALID_END</span> <span class="o">=</span> 


<span class="c1"># Used by extract tiles and series analysis to define the records of</span>
<span class="c1">#  interest to be retrieved from the grib2 file </span>

<span class="nv">BOTH_VAR1_NAME</span> <span class="o">=</span> ivt
<span class="nv">BOTH_VAR1_LEVELS</span> <span class="o">=</span> Surface

<span class="c1"># if true, run series_by_lead for groups of forecasts</span>
<span class="c1"># must set LEAD_SEQ_[N] and LEAD_SEQ_[N]_LABELS for N &gt; 0 groups</span>
<span class="c1"># if false, run series_by_lead for all forecast hours</span>
<span class="c1"># must set LEAD_SEQ</span>
<span class="nv">SERIES_ANALYSIS_GROUP_FCSTS</span> <span class="o">=</span> False

<span class="nv">LEAD_SEQ</span> <span class="o">=</span> <span class="m">90</span>, <span class="m">96</span>, <span class="m">102</span>, <span class="m">108</span>, <span class="m">114</span>

<span class="c1"># forecast lead sequence 1 list (90, 96, 102, 108, 114)</span>
<span class="c1">#LEAD_SEQ_1 = begin_end_incr(90,114,6)</span>
<span class="c1"># forecast lead sequence 1 label</span>
<span class="c1">#LEAD_SEQ_1_LABEL = Day5</span>


<span class="c1">#####</span>
<span class="c1">### PYEMBED INGEST</span>
<span class="c1">#####</span>

<span class="c1"># 1st INGEST INSTANCE: Forecast</span>
<span class="c1"># python script with optional arguments to run for 1st ingest instance</span>
<span class="nv">PY_EMBED_INGEST_1_SCRIPT</span> <span class="o">=</span> <span class="o">{</span>CONFIG_DIR<span class="o">}</span>/gfs_ivt_fcst.py <span class="o">{</span>MODEL_DIR<span class="o">}</span>/<span class="o">{</span>init?fmt<span class="o">=</span>%Y%m%d<span class="o">}</span>/gfs_4_<span class="o">{</span>init?fmt<span class="o">=</span>%Y%m%d<span class="o">}</span>_<span class="o">{</span>init?fmt<span class="o">=</span>%H<span class="o">}</span>00_<span class="o">{</span>lead?fmt<span class="o">=</span>%HHH<span class="o">}</span>.grb2

<span class="c1"># type of python input to expect for 1st ingest instance</span>
<span class="c1"># valid options: NUMPY, XARRAY</span>
<span class="nv">PY_EMBED_INGEST_1_TYPE</span> <span class="o">=</span> NUMPY

<span class="c1"># output grid for 1st ingest instance. Can be a grid definition or file path</span>
<span class="nv">PY_EMBED_INGEST_1_OUTPUT_GRID</span> <span class="o">=</span> <span class="o">{</span>MODEL_DIR<span class="o">}</span>/<span class="o">{</span>init?fmt<span class="o">=</span>%Y%m%d<span class="o">}</span>/gfs_4_<span class="o">{</span>init?fmt<span class="o">=</span>%Y%m%d<span class="o">}</span>_<span class="o">{</span>init?fmt<span class="o">=</span>%H<span class="o">}</span>00_<span class="o">{</span>lead?fmt<span class="o">=</span>%HHH<span class="o">}</span>.grb2

<span class="c1"># output variable name</span>
<span class="nv">PY_EMBED_INGEST_1_OUTPUT_FIELD_NAME</span> <span class="o">=</span> ivt

<span class="c1"># 2nd INGEST INSTANCE: Analysis</span>
<span class="c1"># python script with optional arguments to run for 2nd ingest instance</span>
<span class="nv">PY_EMBED_INGEST_2_SCRIPT</span> <span class="o">=</span> <span class="o">{</span>CONFIG_DIR<span class="o">}</span>/gfs_ivt_analysis.py <span class="o">{</span>MODEL_DIR<span class="o">}</span>/<span class="o">{</span>valid?fmt<span class="o">=</span>%Y%m%d<span class="o">}</span>/gfs_4_<span class="o">{</span>valid?fmt<span class="o">=</span>%Y%m%d<span class="o">}</span>_<span class="o">{</span>valid?fmt<span class="o">=</span>%H<span class="o">}</span>00_000.grb2

<span class="c1"># type of python input to expect for 2nd ingest instance</span>
<span class="c1"># valid options: NUMPY, XARRAY</span>
<span class="nv">PY_EMBED_INGEST_2_TYPE</span> <span class="o">=</span> NUMPY

<span class="c1"># output grid for 2nd ingest instance. Can be a grid definition or file path</span>
<span class="nv">PY_EMBED_INGEST_2_OUTPUT_GRID</span> <span class="o">=</span> <span class="o">{</span>MODEL_DIR<span class="o">}</span>/<span class="o">{</span>valid?fmt<span class="o">=</span>%Y%m%d<span class="o">}</span>/gfs_4_<span class="o">{</span>valid?fmt<span class="o">=</span>%Y%m%d<span class="o">}</span>_<span class="o">{</span>valid?fmt<span class="o">=</span>%H<span class="o">}</span>00_000.grb2

<span class="c1"># output variable name</span>
<span class="nv">PY_EMBED_INGEST_2_OUTPUT_FIELD_NAME</span> <span class="o">=</span> ivt

<span class="c1"># Constants used in creating the tile grid, used by extract tiles</span>
<span class="nv">EXTRACT_TILES_NLAT</span> <span class="o">=</span> <span class="m">60</span>
<span class="nv">EXTRACT_TILES_NLON</span> <span class="o">=</span> <span class="m">60</span>

<span class="c1"># Resolution of data in degrees, used by extract tiles</span>
<span class="nv">EXTRACT_TILES_DLAT</span> <span class="o">=</span> <span class="m">0</span>.5
<span class="nv">EXTRACT_TILES_DLON</span> <span class="o">=</span> <span class="m">0</span>.5

<span class="c1"># Degrees to subtract from the center lat and lon to</span>
<span class="c1"># calculate the lower left lat (lat_ll) and lower</span>
<span class="c1"># left lon (lon_ll) for a grid that is 2n X 2m,</span>
<span class="c1"># where n = EXTRACT_TILES_LAT_ADJ degrees and m = EXTRACT_TILES_LON_ADJ degrees.</span>
<span class="c1"># For this case, where n=15 and m=15, this results</span>
<span class="c1"># in a 30 deg X 30 deg grid.  Used by extract tiles</span>
<span class="nv">EXTRACT_TILES_LON_ADJ</span> <span class="o">=</span> <span class="m">15</span>
<span class="nv">EXTRACT_TILES_LAT_ADJ</span> <span class="o">=</span> <span class="m">15</span>

<span class="c1">##</span>
<span class="c1">#</span>
<span class="c1"># MET TC-Pairs</span>
<span class="c1">#</span>
<span class="c1">##</span>

<span class="c1">#</span>
<span class="c1"># Run MET tc_pairs by indicating the top-level directories for the A-deck</span>
<span class="c1"># and B-deck files. Set to &#39;yes&#39; to run using top-level directories, &#39;no&#39;</span>
<span class="c1"># if you want to run tc_pairs on files paired by the wrapper.</span>
<span class="nv">TC_PAIRS_READ_ALL_FILES</span> <span class="o">=</span> no

<span class="c1"># List of models to be used (white space or comma separated) eg: DSHP, LGEM, HWRF</span>
<span class="c1"># If no models are listed, then process all models in the input file(s).</span>
<span class="nv">MODEL</span> <span class="o">=</span> GFSO

<span class="c1"># List of storm ids of interest (space or comma separated) e.g.: AL112012, AL122012</span>
<span class="c1"># If no storm ids are listed, then process all storm ids in the input file(s).</span>
<span class="nv">TC_PAIRS_STORM_ID</span> <span class="o">=</span>

<span class="c1"># Basins (of origin/region).  Indicate with space or comma-separated list of regions, eg. AL: for North Atlantic,</span>
<span class="c1"># WP: Western North Pacific, CP: Central North Pacific, SH: Southern Hemisphere, IO: North Indian Ocean, LS: Southern</span>
<span class="c1"># Hemisphere</span>
<span class="nv">TC_PAIRS_BASIN</span> <span class="o">=</span>

<span class="c1"># Cyclone, a space or comma-separated list of cyclone numbers. If left empty, all cyclones will be used.</span>
<span class="nv">TC_PAIRS_CYCLONE</span> <span class="o">=</span>

<span class="c1"># Storm name, a space or comma-separated list of storm names to evaluate.  If left empty, all storms will be used.</span>
<span class="nv">TC_PAIRS_STORM_NAME</span> <span class="o">=</span>

<span class="c1"># DLAND file, the full path of the file that contains the gridded representation of the</span>
<span class="c1"># minimum distance from land.</span>
<span class="nv">TC_PAIRS_DLAND_FILE</span> <span class="o">=</span> <span class="o">{</span>MET_INSTALL_DIR<span class="o">}</span>/share/met/tc_data/dland_global_tenth_degree.nc

<span class="nv">TC_PAIRS_REFORMAT_DECK</span> <span class="o">=</span> no
<span class="nv">TC_PAIRS_REFORMAT_TYPE</span> <span class="o">=</span> SBU

<span class="nv">TC_PAIRS_MISSING_VAL_TO_REPLACE</span> <span class="o">=</span> -99
<span class="nv">TC_PAIRS_MISSING_VAL</span> <span class="o">=</span> -9999

<span class="c1">##</span>
<span class="c1">#</span>
<span class="c1"># TC-STAT filtering options, used for extract tiles and series analysis</span>
<span class="c1">#</span>
<span class="c1">##</span>
<span class="nv">EXTRACT_TILES_FILTER_OPTS</span> <span class="o">=</span> -basin AL
<span class="nv">SERIES_ANALYSIS_FILTER_OPTS</span> <span class="o">=</span> -init_beg <span class="o">{</span>INIT_BEG<span class="o">}</span> -init_end <span class="o">{</span>INIT_END<span class="o">}</span>

<span class="c1"># Run tc_stat using a config file or as command line</span>
<span class="c1"># if running via MET tc_stat config file, set to CONFIG.  Leave blank or</span>
<span class="c1"># anything other than CONFIG if running via command line.  In this case,</span>
<span class="c1"># tc_stat is called by one of the METplus wrappers, so don&#39;t assign anything to</span>
<span class="c1"># this keyword.</span>
<span class="nv">TC_STAT_RUN_VIA</span> <span class="o">=</span>

<span class="c1"># For arithmetic expressions such as:</span>
<span class="c1"># -column &#39;ABS(AMSLP-BMSLP)&#39;, enclose the expression in &#39;&#39;.</span>
<span class="c1"># Notice that there are no</span>
<span class="c1"># whitespaces within the arithmetic expression.  White spaces are to be used to</span>
<span class="c1"># separate options from values</span>
<span class="c1"># (e.g. -job summary -by AMODEL,LEAD,AMSLP -init_hour 00 -column &#39;AMSLP-BMSLP&#39;).</span>
<span class="c1"># eg. -lookin {OUTPUT_BASE}/tc_pairs -job filter -dump_row</span>
<span class="c1">#             {OUTPUT_BASE}/tc_stat_filter.out -basin ML -init_hr 00</span>
<span class="c1"># or -lookin {OUTPUT_BASE}/tc_pairs -job summary -by AMODEL,LEAD -column AMSLP</span>
<span class="c1">#    -column AMAX_WIND -column &#39;ABS(AMAX_WIND-BMAX_WIND)&#39;</span>
<span class="c1">#    -out {OUTPUT_BASE}/tc_stat/tc_stat_summary.tcst</span>

<span class="c1"># NOTE: Since we aren&#39;t explicitly indicating TC_STAT in our process list</span>
<span class="c1"># (i.e. tc_stat is being called within another wrapper), leave this</span>
<span class="c1"># blank/undefined.</span>
<span class="nv">TC_STAT_CMD_LINE_JOB</span> <span class="o">=</span>

<span class="c1"># Specify whether only those track points common to both the ADECK and BDECK</span>
<span class="c1"># tracks should be written out.  This is only used when explicitly calling</span>
<span class="c1"># TC_STAT in the PROCESS_LIST.  This is not used in this use case, so setting</span>
<span class="c1"># it to either false or true has no impact.</span>
<span class="nv">TC_STAT_MATCH_POINTS</span> <span class="o">=</span> <span class="nb">false</span>

<span class="c1">##</span>
<span class="c1"># !!!DO NOT MODIFY THESE!!!, they are required for all config files with</span>
<span class="c1"># processes that call tc_stat, but only need valid values when tc_stat</span>
<span class="c1"># is explicitly listed in the PROCESS_LIST.  This use case does not</span>
<span class="c1"># require tc_stat to be explicitly listed in the PROCESS_LIST, tc_stat</span>
<span class="c1"># is invoked from within one or more of the other items in the PROCESS_LIST</span>
<span class="c1"># (i.e. when filtering within extract tiles or within series analysis).</span>
<span class="c1">#</span>
<span class="c1">#  FILL in the following values if running multiple jobs which</span>
<span class="c1">#  requires a MET tc_stat config file.</span>
<span class="c1">#</span>
<span class="c1">##</span>

<span class="c1"># These all map to the options in the default TC-Stat config file, except these</span>
<span class="c1"># are pre-pended with TC_STAT to avoid clashing with any other similarly</span>
<span class="c1"># named options from other MET tools (eg TC_STAT_AMODEL corresponds to the</span>
<span class="c1"># amodel option in the default MET tc-stat config file, whereas AMODEL</span>
<span class="c1"># corresponds to the amodel option in the MET tc-pairs config file).</span>

<span class="c1"># Stratify by these columns:</span>
<span class="nv">TC_STAT_AMODEL</span> <span class="o">=</span> <span class="o">{</span>MODEL<span class="o">}</span>
<span class="nv">TC_STAT_BMODEL</span> <span class="o">=</span>
<span class="nv">TC_STAT_DESC</span> <span class="o">=</span>
<span class="nv">TC_STAT_STORM_ID</span> <span class="o">=</span>
<span class="nv">TC_STAT_BASIN</span> <span class="o">=</span>
<span class="nv">TC_STAT_CYCLONE</span> <span class="o">=</span>
<span class="nv">TC_STAT_STORM_NAME</span> <span class="o">=</span>

<span class="c1"># Stratify by init times via a comma-separate list of init times to</span>
<span class="c1"># include or exclude.  Time format defined as YYYYMMDD_HH or YYYYMMDD_HHmmss</span>
<span class="nv">TC_STAT_INIT_BEG</span> <span class="o">=</span> 20190830_00
<span class="nv">TC_STAT_INIT_END</span> <span class="o">=</span> 20190830_18
<span class="nv">TC_STAT_INIT_INCLUDE</span> <span class="o">=</span>
<span class="nv">TC_STAT_INIT_EXCLUDE</span> <span class="o">=</span>
<span class="nv">TC_STAT_INIT_HOUR</span> <span class="o">=</span>  
<span class="c1"># Stratify by valid times via a comma-separate list of valid times to</span>
<span class="c1"># include or exclude.  Time format defined as YYYYMMDD_HH or YYYYMMDD_HHmmss</span>
<span class="nv">TC_STAT_VALID_BEG</span> <span class="o">=</span>
<span class="nv">TC_STAT_VALID_END</span> <span class="o">=</span> 
<span class="nv">TC_STAT_VALID_INCLUDE</span> <span class="o">=</span>
<span class="nv">TC_STAT_VALID_EXCLUDE</span> <span class="o">=</span>
<span class="nv">TC_STAT_VALID_HOUR</span> <span class="o">=</span>
<span class="nv">TC_STAT_LEAD_REQ</span> <span class="o">=</span>
<span class="nv">TC_STAT_INIT_MASK</span> <span class="o">=</span>
<span class="nv">TC_STAT_VALID_MASK</span> <span class="o">=</span>
<span class="c1"># Stratify by the valid time and lead time via comma-separated list of</span>
<span class="c1"># times in format HH[MMSS]</span>
<span class="nv">TC_STAT_VALID_HOUR</span> <span class="o">=</span>
<span class="nv">TC_STAT_LEAD</span> <span class="o">=</span>

<span class="c1"># Stratify over the watch_warn column in the tcst file.  Setting this to</span>
<span class="c1"># &#39;ALL&#39; will match HUWARN, HUWATCH, TSWARN, TSWATCH</span>
<span class="nv">TC_STAT_TRACK_WATCH_WARN</span> <span class="o">=</span>

<span class="c1"># Stratify by applying thresholds to numeric data columns.  Specify with</span>
<span class="c1"># comma-separated list of column names and thresholds to be applied.</span>
<span class="c1"># The length of TC_STAT_COLUMN_THRESH_NAME should be the same as</span>
<span class="c1"># TC_STAT_COLUMN_THRESH_VAL.</span>
<span class="nv">TC_STAT_COLUMN_THRESH_NAME</span> <span class="o">=</span>
<span class="nv">TC_STAT_COLUMN_THRESH_VAL</span> <span class="o">=</span>

<span class="c1"># Stratify by a list of comma-separated columns names and values corresponding</span>
<span class="c1"># to non-numeric data columns of the values of interest.</span>
<span class="nv">TC_STAT_COLUMN_STR_NAME</span> <span class="o">=</span>
<span class="nv">TC_STAT_COLUMN_STR_VAL</span> <span class="o">=</span>

<span class="c1"># Stratify by applying thresholds to numeric data columns only when lead=0.</span>
<span class="c1"># If lead=0 and the value does not meet the threshold, discard the entire</span>
<span class="c1"># track.  The length of TC_STAT_INIT_THRESH_NAME must equal the length of</span>
<span class="c1"># TC_STAT_INIT_THRESH_VAL.</span>
<span class="nv">TC_STAT_INIT_THRESH_NAME</span> <span class="o">=</span>
<span class="nv">TC_STAT_INIT_THRESH_VAL</span> <span class="o">=</span>

<span class="c1"># Stratify by applying thresholds to numeric data columns only when lead = 0.</span>
<span class="c1"># If lead = 0 but the value doesn&#39;t meet the threshold, discard the entire</span>
<span class="c1"># track.</span>
<span class="nv">TC_STAT_INIT_STR_NAME</span> <span class="o">=</span>
<span class="nv">TC_STAT_INIT_STR_VAL</span> <span class="o">=</span>

<span class="c1"># Excludes any points where distance to land is &lt;=0. When set to TRUE, once land</span>
<span class="c1"># is encountered, the remainder of the forecast track is NOT used for the</span>
<span class="c1"># verification, even if the track moves back over water.</span>
<span class="nv">TC_STAT_WATER_ONLY</span> <span class="o">=</span>

<span class="c1"># TRUE or FALSE.  To specify whether only those track points occurring near</span>
<span class="c1"># landfall should be retained. Landfall is the last bmodel track point before</span>
<span class="c1"># the distance to land switches from water to land.</span>
<span class="nv">TC_STAT_LANDFALL</span> <span class="o">=</span>

<span class="c1"># Define the landfall retention window, which is defined as the hours offset</span>
<span class="c1"># from the time of landfall. Format is in HH[MMSS]. Default TC_STAT_LANDFALL_BEG</span>
<span class="c1"># is set to -24, and TC_STAT_LANDFALL_END is set to 00</span>
<span class="nv">TC_STAT_LANDFALL_BEG</span> <span class="o">=</span> -24
<span class="nv">TC_STAT_LANDFALL_END</span> <span class="o">=</span> <span class="m">00</span>

<span class="c1"># Specify whether only those track points common to both the ADECK and BDECK</span>
<span class="c1"># tracks should be written out</span>
<span class="nv">TC_STAT_MATCH_POINTS</span> <span class="o">=</span> <span class="nb">false</span>

<span class="c1"># IMPORTANT  Refer to the README_TC for details on setting up analysis</span>
<span class="c1"># jobs (located in {MET_INSTALL_DIR}/share/met/config</span>

<span class="c1"># Separate each option and value with whitespace, and each job with a whitespace.</span>
<span class="c1"># No whitespace within arithmetic expressions or lists of items</span>
<span class="c1"># (e.g. -by AMSLP,AMODEL,LEAD -column &#39;(AMAX_WIND-BMAX_WIND)&#39;)</span>
<span class="c1"># Enclose your arithmetic expressions with &#39;&#39; and separate each job</span>
<span class="c1"># by whitespace:</span>
<span class="c1">#  -job filter -dump_row /path/to,  -job summary -line_type TCMPR  -column &#39;ABS(AMAX_WIND-BMAX_WIND)&#39; -out {OUTPUT_BASE}/tc_stat/file.tcst</span>

<span class="nv">TC_STAT_JOBS_LIST</span> <span class="o">=</span> -job summary -line_type TCMPR -column <span class="s1">&#39;ABS(AMAX_WIND-BMAX_WIND)&#39;</span> -dump_row <span class="o">{</span>OUTPUT_BASE<span class="o">}</span>/tc_stat/tc_stat_summary.tcst

<span class="c1">#</span>
<span class="c1"># !!!END of DO NOT MODIFY!!!</span>
<span class="c1">#</span>

<span class="c1"># OVERWRITE OPTIONS</span>
<span class="c1"># Don&#39;t overwrite filter files if they already exist.</span>
<span class="c1"># Set to no if you do NOT want to override existing files</span>
<span class="c1"># Set to yes if you do want to override existing files</span>
<span class="nv">EXTRACT_TILES_OVERWRITE_TRACK</span> <span class="o">=</span> yes

<span class="c1"># overwrite modified track data (non-ATCF to ATCF format)</span>
<span class="nv">TC_PAIRS_SKIP_IF_REFORMAT_EXISTS</span> <span class="o">=</span> no

<span class="c1"># overwrite tc_pairs output</span>
<span class="nv">TC_PAIRS_SKIP_IF_OUTPUT_EXISTS</span> <span class="o">=</span> no

<span class="c1"># PLOTTING Relevant to series analysis plots.</span>
<span class="c1"># By default, background map is turned off. Set</span>
<span class="c1"># to no to turn of plotting of background map.</span>
<span class="nv">SERIES_ANALYSIS_BACKGROUND_MAP</span> <span class="o">=</span> yes

<span class="c1">#</span>
<span class="c1">#  FILENAME TEMPLATES</span>
<span class="c1">#</span>
<span class="o">[</span>filename_templates<span class="o">]</span>
<span class="c1"># Define the format of the filenames</span>
<span class="nv">PY_EMBED_INGEST_1_OUTPUT_TEMPLATE</span> <span class="o">=</span> <span class="o">{</span>init?fmt<span class="o">=</span>%Y%m%d<span class="o">}</span>/gfs_4_<span class="o">{</span>init?fmt<span class="o">=</span>%Y%m%d<span class="o">}</span>_<span class="o">{</span>init?fmt<span class="o">=</span>%H<span class="o">}</span>00_<span class="o">{</span>lead?fmt<span class="o">=</span>%HHH<span class="o">}</span>.nc
<span class="nv">PY_EMBED_INGEST_2_OUTPUT_TEMPLATE</span> <span class="o">=</span> <span class="o">{</span>valid?fmt<span class="o">=</span>%Y%m%d<span class="o">}</span>/gfs_4_<span class="o">{</span>valid?fmt<span class="o">=</span>%Y%m%d<span class="o">}</span>_<span class="o">{</span>valid?fmt<span class="o">=</span>%H<span class="o">}</span>00_000.nc

<span class="nv">FCST_EXTRACT_TILES_INPUT_TEMPLATE</span> <span class="o">=</span> gfs_4_<span class="o">{</span>init?fmt<span class="o">=</span>%Y%m%d<span class="o">}</span>_<span class="o">{</span>init?fmt<span class="o">=</span>%H<span class="o">}</span>00_<span class="o">{</span>lead?fmt<span class="o">=</span>%HHH<span class="o">}</span>.nc
<span class="nv">OBS_EXTRACT_TILES_INPUT_TEMPLATE</span> <span class="o">=</span> gfs_4_<span class="o">{</span>valid?fmt<span class="o">=</span>%Y%m%d<span class="o">}</span>_<span class="o">{</span>valid?fmt<span class="o">=</span>%H<span class="o">}</span>00_000.nc

<span class="nv">FCST_EXTRACT_TILES_OUTPUT_TEMPLATE</span> <span class="o">=</span> FCST_TILE_F<span class="o">{</span>lead?fmt<span class="o">=</span>%HHH<span class="o">}</span>_<span class="o">{</span>amodel<span class="o">}</span>_<span class="o">{</span>FCST_EXTRACT_TILES_INPUT_TEMPLATE<span class="o">}</span>

<span class="nv">OBS_EXTRACT_TILES_OUTPUT_TEMPLATE</span> <span class="o">=</span> ANLY_TILE_F<span class="o">{</span>lead?fmt<span class="o">=</span>%HHH<span class="o">}</span>_<span class="o">{</span>amodel<span class="o">}</span>_<span class="o">{</span>OBS_EXTRACT_TILES_INPUT_TEMPLATE<span class="o">}</span>

<span class="nv">TC_PAIRS_ADECK_TEMPLATE</span> <span class="o">=</span> a<span class="o">{</span>basin?fmt<span class="o">=</span>%s<span class="o">}</span><span class="m">052019</span>.dat
<span class="nv">TC_PAIRS_BDECK_TEMPLATE</span> <span class="o">=</span> b<span class="o">{</span>basin?fmt<span class="o">=</span>%s<span class="o">}</span><span class="m">052019</span>.dat
<span class="nv">TC_PAIRS_OUTPUT_TEMPLATE</span> <span class="o">=</span> <span class="o">{</span>date?fmt<span class="o">=</span>%Y%m<span class="o">}</span>/<span class="o">{</span>basin?fmt<span class="o">=</span>%s<span class="o">}</span>q<span class="o">{</span>date?fmt<span class="o">=</span>%Y%m%d%H<span class="o">}</span>.dorian

<span class="c1">#</span>
<span class="c1">#  DIRECTORIES</span>
<span class="c1">#</span>
<span class="o">[</span>dir<span class="o">]</span>

<span class="c1"># location of configuration files used by MET applications</span>
<span class="nv">CONFIG_DIR</span><span class="o">={</span>PARM_BASE<span class="o">}</span>/use_cases/model_applications/medium_range

<span class="c1">#Location of model data</span>
<span class="nv">MODEL_DIR</span> <span class="o">=</span> <span class="o">{</span>INPUT_BASE<span class="o">}</span>/model_applications/medium_range/dorian_data/model_data

<span class="nv">PY_EMBED_INGEST_1_OUTPUT_DIR</span> <span class="o">=</span> <span class="o">{</span>OUTPUT_BASE<span class="o">}</span>/py_embed_out
<span class="nv">PY_EMBED_INGEST_2_OUTPUT_DIR</span> <span class="o">=</span> <span class="o">{</span>PY_EMBED_INGEST_1_OUTPUT_DIR<span class="o">}</span>

<span class="c1"># Using further reduced data set than what was previously used</span>
<span class="nv">EXTRACT_TILES_GRID_INPUT_DIR</span> <span class="o">=</span> <span class="o">{</span>OUTPUT_BASE<span class="o">}</span>/py_embed_out

<span class="c1"># track data, set to your data source</span>
<span class="nv">TC_PAIRS_ADECK_INPUT_DIR</span> <span class="o">=</span> <span class="o">{</span>INPUT_BASE<span class="o">}</span>/model_applications/medium_range/dorian_data/track_data
<span class="nv">TC_PAIRS_BDECK_INPUT_DIR</span> <span class="o">=</span> <span class="o">{</span>TC_PAIRS_ADECK_INPUT_DIR<span class="o">}</span>
<span class="nv">TC_PAIRS_REFORMAT_DIR</span> <span class="o">=</span> <span class="o">{</span>OUTPUT_BASE<span class="o">}</span>/track_data_atcf
<span class="nv">TC_PAIRS_OUTPUT_DIR</span> <span class="o">=</span> <span class="o">{</span>OUTPUT_BASE<span class="o">}</span>/tc_pairs

<span class="nv">EXTRACT_TILES_PAIRS_INPUT_DIR</span> <span class="o">=</span> <span class="o">{</span>TC_PAIRS_OUTPUT_DIR<span class="o">}</span>

<span class="c1"># The TC_STAT_INPUT_DIR, TC_STAT_OUTPUT_DIR, and TC_STAT_CONFIG_FILE</span>
<span class="c1"># must be present but are not needed in this use case since tc_stat is</span>
<span class="c1"># being invoked from within another wrapper, rather than explicitly</span>
<span class="c1"># listed in the PROCESS_LIST to run on its own.</span>
<span class="c1"># TC-Stat input data (uses output from tc-pairs)</span>
<span class="nv">TC_STAT_INPUT_DIR</span> <span class="o">=</span> <span class="o">{</span>OUTPUT_BASE<span class="o">}</span>/tc_pairs

<span class="c1"># TC-Stat output data (creates .tcst ASCII files which can be read or used as</span>
<span class="c1"># input to TCMPR_Plotter_wrapper (the Python wrapper to plot_tcmpr.R) to create plots.</span>
<span class="nv">TC_STAT_OUTPUT_DIR</span> <span class="o">=</span> <span class="o">{</span>OUTPUT_BASE<span class="o">}</span>/tc_stat

<span class="c1"># Use this setting to separate the filtered track files from</span>
<span class="c1"># the series analysis directory.</span>
<span class="nv">EXTRACT_TILES_OUTPUT_DIR</span> <span class="o">=</span> <span class="o">{</span>OUTPUT_BASE<span class="o">}</span>/extract_tiles
<span class="nv">SERIES_ANALYSIS_INPUT_DIR</span> <span class="o">=</span> <span class="o">{</span>EXTRACT_TILES_OUTPUT_DIR<span class="o">}</span>
<span class="nv">SERIES_ANALYSIS_FILTERED_OUTPUT_DIR</span> <span class="o">=</span> <span class="o">{</span>OUTPUT_BASE<span class="o">}</span>/series_lead_filtered

<span class="c1"># Define the output directories for Series analysis by lead and init</span>
<span class="nv">SERIES_ANALYSIS_OUTPUT_DIR</span> <span class="o">=</span> <span class="o">{</span>OUTPUT_BASE<span class="o">}</span>/series_analysis_lead

<span class="c1">#</span>
<span class="c1">#  REGEX PATTERNS</span>
<span class="c1">#</span>
<span class="o">[</span>regex_pattern<span class="o">]</span>
<span class="c1"># Regular expressions that are used in series analysis</span>
<span class="c1"># Forecast and Analysis tile files, and ASCII files</span>
<span class="c1"># created by the series analysis by init and lead time</span>

<span class="c1"># Indicate the prefix to the output netCDF files generated by </span>
<span class="c1"># MET series_analysis</span>
<span class="c1"># For example, MET will produce files with the following format:</span>
<span class="c1">#  &lt;prefix&gt;__F018_gfs_4_20141215_0000_018.nc</span>
<span class="c1"># and the &lt;prefix&gt; enables the user to distinguish the forecast</span>
<span class="c1"># files from the analysis files</span>
<span class="nv">FCST_EXTRACT_TILES_PREFIX</span> <span class="o">=</span> FCST_TILE_F
<span class="nv">OBS_EXTRACT_TILES_PREFIX</span> <span class="o">=</span> ANLY_TILE_F


<span class="c1">#</span>
<span class="c1"># Indicate the regular expression of the files that were created by the</span>
<span class="c1"># extract tiles wrapper.  This information is used to check that input tiles</span>
<span class="c1"># exist before proceeding with the series analysis process.</span>
<span class="c1">#</span>
<span class="c1"># These are the forecast and analysis input files that are expected if regridding</span>
<span class="c1"># is to be performed by MET regrid_data_plane</span>
<span class="nv">FCST_SERIES_ANALYSIS_TILE_REGEX</span> <span class="o">=</span> .*FCST_TILE_F.*.grb2
<span class="nv">OBS_SERIES_ANALYSIS_TILE_REGEX</span> <span class="o">=</span> .*ANLY_TILE_F.*.grb2

<span class="c1"># These are the forecast and analysis input files that are expected if regridding</span>
<span class="c1"># is to be done via the NOAA wgrib2 tool.</span>
<span class="nv">FCST_SERIES_ANALYSIS_NC_TILE_REGEX</span> <span class="o">=</span> .*FCST_TILE_F.*.nc
<span class="nv">OBS_SERIES_ANALYSIS_NC_TILE_REGEX</span> <span class="o">=</span> .*ANLY_TILE_F.*.nc

<span class="c1"># The regular expression describing the format of the forecast and analysis files </span>
<span class="c1"># that contain a list of the gridded files included in the series analysis.  This</span>
<span class="c1"># information is used to clean up pre-existing forecast and analysis files.</span>
<span class="nv">FCST_SERIES_ANALYSIS_ASCII_REGEX_LEAD</span> <span class="o">=</span> FCST_FILE_F.*
<span class="nv">OBS_SERIES_ANALYSIS_ASCII_REGEX_LEAD</span> <span class="o">=</span> ANLY_FILE_F.*

<span class="o">[</span>exe<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="met-configuration">
<h2>MET Configuration<a class="headerlink" href="#met-configuration" title="Permalink to this headline">¶</a></h2>
<p>METplus sets environment variables based on the values in the METplus configuration file.
These variables are referenced in the MET configuration file.
<strong>YOU SHOULD NOT SET ANY OF THESE ENVIRONMENT VARIABLES YOURSELF! THEY WILL BE OVERWRITTEN BY METPLUS WHEN IT CALLS THE MET TOOLS!</strong>
If there is a setting in the MET configuration file that is not controlled by an environment
variable, you can add additional environment variables to be set only within the METplus environmen
using the [user_env_vars] section of the METplus configuration files. See the ‘User Defined Config’
section on the ‘System Configuration’ page of the METplus User’s Guide for more information.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>////////////////////////////////////////////////////////////////////////////////
//
// Default TCPairs configuration file
//
////////////////////////////////////////////////////////////////////////////////

//
// ATCF file format reference:
//   http://www.nrlmry.navy.mil/atcf_web/docs/database/new/abrdeck.html
//

//
// Models
//
<span class="nv">model</span> <span class="o">=</span> <span class="si">${</span><span class="nv">MODEL</span><span class="si">}</span><span class="p">;</span>

//
// Description
//
<span class="nv">desc</span> <span class="o">=</span> <span class="s2">&quot;NA&quot;</span><span class="p">;</span>

//
// Storm identifiers
//
<span class="nv">storm_id</span> <span class="o">=</span> <span class="si">${</span><span class="nv">STORM_ID</span><span class="si">}</span><span class="p">;</span>

//
// Basins
//
<span class="nv">basin</span> <span class="o">=</span> <span class="si">${</span><span class="nv">BASIN</span><span class="si">}</span><span class="p">;</span>

//
// Cyclone numbers
//
<span class="nv">cyclone</span> <span class="o">=</span> <span class="si">${</span><span class="nv">CYCLONE</span><span class="si">}</span><span class="p">;</span>

//
// Storm names
//
<span class="nv">storm_name</span> <span class="o">=</span> <span class="si">${</span><span class="nv">STORM_NAME</span><span class="si">}</span><span class="p">;</span>

//
// Model initialization <span class="nb">time</span> windows to include or exclude
//
<span class="nv">init_beg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">INIT_BEG</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">init_end</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">INIT_END</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">init_inc</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_INCLUDE</span><span class="si">}</span><span class="p">;</span>
<span class="nv">init_exc</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_EXCLUDE</span><span class="si">}</span><span class="p">;</span>
//
// Valid model <span class="nb">time</span> window
//
<span class="nv">valid_beg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">VALID_BEG</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">valid_end</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">VALID_END</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>

//
// Model initialization hours
//
<span class="nv">init_hour</span> <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>

//
// Required lead <span class="nb">time</span> in hours
//
<span class="nv">lead_req</span> <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>

//
// lat/lon polylines defining masking regions
//
<span class="nv">init_mask</span>  <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="nv">valid_mask</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

//
// Specify <span class="k">if</span> the code should check <span class="k">for</span> duplicate ATCF lines
//
<span class="nv">check_dup</span> <span class="o">=</span> FALSE<span class="p">;</span>

//
// Specify special processing to be performed <span class="k">for</span> interpolated models.
// Set to NONE, FILL, or REPLACE.
//
<span class="nv">interp12</span> <span class="o">=</span> REPLACE<span class="p">;</span>

//
// Specify how consensus forecasts should be defined
//
<span class="nv">consensus</span> <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>

//
// Forecast lag <span class="nb">times</span>
//
<span class="nv">lag_time</span> <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>

//
// CLIPER/SHIFOR baseline forecasts to be derived from the BEST
// and operational <span class="o">(</span>CARQ<span class="o">)</span> tracks.
//
<span class="nv">best_technique</span> <span class="o">=</span> <span class="o">[</span> <span class="s2">&quot;BEST&quot;</span> <span class="o">]</span><span class="p">;</span>
<span class="nv">best_baseline</span>  <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
<span class="nv">oper_technique</span> <span class="o">=</span> <span class="o">[</span> <span class="s2">&quot;CARQ&quot;</span> <span class="o">]</span><span class="p">;</span>
<span class="nv">oper_baseline</span>  <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>

<span class="nv">anly_track</span> <span class="o">=</span> BDECK<span class="p">;</span>

//
// Specify <span class="k">if</span> only those track points common to both the ADECK and BDECK
// tracks be written out.
//
<span class="nv">match_points</span> <span class="o">=</span> FALSE<span class="p">;</span>

//
// Specify the NetCDF output of the gen_dland tool containing a gridded
// representation of the minimum distance to land.
//
<span class="nv">dland_file</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">DLAND_FILE</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>

//
// Specify watch/warning information:
//   - Input watch/warning filename
//   - Watch/warning <span class="nb">time</span> offset in seconds
//
<span class="nv">watch_warn</span> <span class="o">=</span> <span class="o">{</span>
   <span class="nv">file_name</span>   <span class="o">=</span> <span class="s2">&quot;MET_BASE/tc_data/wwpts_us.txt&quot;</span><span class="p">;</span>
   <span class="nv">time_offset</span> <span class="o">=</span> -14400<span class="p">;</span>
<span class="o">}</span>

//
// Indicate a version number <span class="k">for</span> the contents of this configuration file.
// The value should generally not be modified.
//
//version <span class="o">=</span> <span class="s2">&quot;V9.0&quot;</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>////////////////////////////////////////////////////////////////////////////////
//
// Default TCStat configuration file
//
////////////////////////////////////////////////////////////////////////////////

//
// The parameters listed below are used to filter the TC-STAT data down to the
// desired subset of lines over which statistics are to be computed.  Only
// those lines which meet ALL of the criteria specified will be retained.
//
// The settings that are common to all <span class="nb">jobs</span> may be specified once at the top
// level.  If no selection is listed <span class="k">for</span> a parameter, that parameter will not
// be used <span class="k">for</span> filtering.  If multiple selections are listed <span class="k">for</span> a parameter,
// the analyses will be performed on their union.
//

//
// Stratify by the AMODEL or BMODEL columns.
//
<span class="nv">amodel</span> <span class="o">=</span> <span class="si">${</span><span class="nv">AMODEL</span><span class="si">}</span><span class="p">;</span>
<span class="nv">bmodel</span> <span class="o">=</span> <span class="si">${</span><span class="nv">BMODEL</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the DESC column.
//
<span class="nv">desc</span> <span class="o">=</span> <span class="si">${</span><span class="nv">DESC</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the STORM_ID column.
//
<span class="nv">storm_id</span> <span class="o">=</span> <span class="si">${</span><span class="nv">STORM_ID</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the BASIN column.
// May add using the <span class="s2">&quot;-basin&quot;</span> job <span class="nb">command</span> option.
//
<span class="nv">basin</span> <span class="o">=</span> <span class="si">${</span><span class="nv">BASIN</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the CYCLONE column.
// May add using the <span class="s2">&quot;-cyclone&quot;</span> job <span class="nb">command</span> option.
//
<span class="nv">cyclone</span> <span class="o">=</span> <span class="si">${</span><span class="nv">CYCLONE</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the STORM_NAME column.
// May add using the <span class="s2">&quot;-storm_name&quot;</span> job <span class="nb">command</span> option.
//
<span class="nv">storm_name</span> <span class="o">=</span> <span class="si">${</span><span class="nv">STORM_NAME</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the INIT times.
// Model initialization <span class="nb">time</span> windows to include or exclude
// May modify using the <span class="s2">&quot;-init_beg&quot;</span>, <span class="s2">&quot;-init_end&quot;</span>, <span class="s2">&quot;-init_inc&quot;</span>,
// and <span class="s2">&quot;-init_exc&quot;</span> job <span class="nb">command</span> options.
//
<span class="nv">init_beg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">INIT_BEG</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">init_end</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">INIT_END</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">init_inc</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_INCLUDE</span><span class="si">}</span><span class="p">;</span>
<span class="nv">init_exc</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_EXCLUDE</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the VALID times.
//
<span class="nv">valid_beg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">VALID_BEG</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">valid_end</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">VALID_END</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">valid_inc</span> <span class="o">=</span> <span class="si">${</span><span class="nv">VALID_INCLUDE</span><span class="si">}</span><span class="p">;</span>
<span class="nv">valid_exc</span> <span class="o">=</span> <span class="si">${</span><span class="nv">VALID_EXCLUDE</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the initialization and valid hours and lead time.
//
<span class="nv">init_hour</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_HOUR</span><span class="si">}</span><span class="p">;</span>
<span class="nv">valid_hour</span> <span class="o">=</span> <span class="si">${</span><span class="nv">VALID_HOUR</span><span class="si">}</span><span class="p">;</span>
<span class="nv">lead</span> <span class="o">=</span> <span class="si">${</span><span class="nv">LEAD</span><span class="si">}</span><span class="p">;</span>

//
// Select tracks which contain all required lead times.
//
<span class="nv">lead_req</span> <span class="o">=</span> <span class="si">${</span><span class="nv">LEAD_REQ</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the INIT_MASK and VALID_MASK columns.
//
<span class="nv">init_mask</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_MASK</span><span class="si">}</span><span class="p">;</span>
<span class="nv">valid_mask</span> <span class="o">=</span> <span class="si">${</span><span class="nv">VALID_MASK</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the LINE_TYPE column.
//
<span class="nv">line_type</span> <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>

//
// Stratify by checking the watch/warning status <span class="k">for</span> each track point
// common to both the ADECK and BDECK tracks.  If the watch/warning status
// of any of the track points appears in the list, retain the entire track.
//
<span class="nv">track_watch_warn</span> <span class="o">=</span> <span class="si">${</span><span class="nv">TRACK_WATCH_WARN</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by applying thresholds to numeric data columns.
//
<span class="nv">column_thresh_name</span> <span class="o">=</span> <span class="si">${</span><span class="nv">COLUMN_THRESH_NAME</span><span class="si">}</span><span class="p">;</span>
<span class="nv">column_thresh_val</span> <span class="o">=</span> <span class="si">${</span><span class="nv">COLUMN_THRESH_VAL</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by performing string matching on non-numeric data columns.
//
<span class="nv">column_str_name</span> <span class="o">=</span> <span class="si">${</span><span class="nv">COLUMN_STR_NAME</span><span class="si">}</span><span class="p">;</span>
<span class="nv">column_str_val</span> <span class="o">=</span> <span class="si">${</span><span class="nv">COLUMN_STR_VAL</span><span class="si">}</span><span class="p">;</span>

//
// Similar to the column_thresh options above
//
<span class="nv">init_thresh_name</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_THRESH_NAME</span><span class="si">}</span><span class="p">;</span>
<span class="nv">init_thresh_val</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_THRESH_VAL</span><span class="si">}</span><span class="p">;</span>

//
// Similar to the column_str options above
//
<span class="nv">init_str_name</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_STR_NAME</span><span class="si">}</span><span class="p">;</span>
<span class="nv">init_str_val</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_STR_VAL</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the ADECK and BDECK distances to land.
//
<span class="nv">water_only</span> <span class="o">=</span> <span class="si">${</span><span class="nv">WATER_ONLY</span><span class="si">}</span><span class="p">;</span>

//
// Specify whether only those track points <span class="k">for</span> which rapid intensification
// or weakening of the maximum wind speed occurred in the previous <span class="nb">time</span>
// step should be retained.
//
<span class="nv">rirw</span> <span class="o">=</span> <span class="o">{</span>
   <span class="nv">track</span>  <span class="o">=</span> NONE<span class="p">;</span>
   <span class="nv">adeck</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nb">time</span>   <span class="o">=</span> <span class="s2">&quot;24&quot;</span><span class="p">;</span>
      <span class="nv">exact</span>  <span class="o">=</span> TRUE<span class="p">;</span>
      <span class="nv">thresh</span> <span class="o">=</span> &gt;<span class="o">=</span><span class="m">30</span>.0<span class="p">;</span>
   <span class="o">}</span>
   <span class="nv">bdeck</span> <span class="o">=</span> adeck<span class="p">;</span>
<span class="o">}</span>

//
// Specify whether only those track points occurring near landfall should be
// retained, and define the landfall retention window in HH<span class="o">[</span>MMSS<span class="o">]</span> format
// around the landfall time.
//
<span class="nv">landfall</span> <span class="o">=</span> <span class="si">${</span><span class="nv">LANDFALL</span><span class="si">}</span><span class="p">;</span>
<span class="nv">landfall_beg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">LANDFALL_BEG</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">landfall_end</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">LANDFALL_END</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>


//
// Specify whether only those track points common to both the ADECK and BDECK
// tracks should be retained.  May modify using the <span class="s2">&quot;-match_points&quot;</span> job <span class="nb">command</span>
// option.
//
<span class="nv">match_points</span> <span class="o">=</span> <span class="si">${</span><span class="nv">MATCH_POINTS</span><span class="si">}</span><span class="p">;</span>

//
// Specify whether only those cases common to all models in the dataset should
// be retained.
//
<span class="nv">event_equal</span> <span class="o">=</span> FALSE<span class="p">;</span>

//
// Specify lead <span class="nb">times</span> that must be present <span class="k">for</span> a track to be included in the
// event equalization logic.
//
<span class="nv">event_equal_lead</span> <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>

//
// Apply polyline masking logic to the location of the ADECK track at the
// initialization time.
//
<span class="nv">out_init_mask</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

//
// Apply polyline masking logic to the location of the ADECK track at the
// valid time.
//
<span class="nv">out_valid_mask</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

//
// Array of TCStat analysis <span class="nb">jobs</span> to be performed on the filtered data
//
<span class="nb">jobs</span> <span class="o">=</span> <span class="si">${</span><span class="nv">JOBS</span><span class="si">}</span><span class="p">;</span>

//
// Indicate a version number <span class="k">for</span> the contents of this configuration file.
// The value should generally not be modified.
//
//version <span class="o">=</span> <span class="s2">&quot;V9.0&quot;</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>////////////////////////////////////////////////////////////////////////////////
//
// Series-Analysis configuration file.
//
// For additional information, see the MET_BASE/config/README file.
//
////////////////////////////////////////////////////////////////////////////////

//
// Output model name to be written
//
<span class="nv">model</span> <span class="o">=</span> <span class="s2">&quot;WRF&quot;</span><span class="p">;</span>

//
// Output description to be written
//
<span class="nv">desc</span> <span class="o">=</span> <span class="s2">&quot;NA&quot;</span><span class="p">;</span>

//
// Output observation <span class="nb">type</span> to be written
//
<span class="nv">obtype</span> <span class="o">=</span> <span class="s2">&quot;ANALYS&quot;</span><span class="p">;</span>

////////////////////////////////////////////////////////////////////////////////

//
// Verification grid
//
<span class="nv">regrid</span> <span class="o">=</span> <span class="o">{</span>
   <span class="nv">to_grid</span>    <span class="o">=</span> <span class="si">${</span><span class="nv">REGRID_TO_GRID</span><span class="si">}</span><span class="p">;</span>
   <span class="nv">method</span>     <span class="o">=</span> FORCE<span class="p">;</span>
   <span class="nv">width</span>      <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
   <span class="nv">vld_thresh</span> <span class="o">=</span> <span class="m">0</span>.5<span class="p">;</span>
   <span class="nv">shape</span>      <span class="o">=</span> SQUARE<span class="p">;</span>
<span class="o">}</span>

////////////////////////////////////////////////////////////////////////////////

<span class="nv">censor_thresh</span> <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
<span class="nv">censor_val</span>    <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
<span class="nv">cat_thresh</span>  <span class="o">=</span> <span class="o">[</span> NA <span class="o">]</span><span class="p">;</span>
<span class="nv">cnt_thresh</span>  <span class="o">=</span> <span class="o">[</span> NA <span class="o">]</span><span class="p">;</span>
<span class="nv">cnt_logic</span>   <span class="o">=</span> UNION<span class="p">;</span>

//
// Forecast and observation fields to be verified
//
<span class="nv">fcst</span> <span class="o">=</span> <span class="o">{</span>

   <span class="nv">field</span> <span class="o">=</span> <span class="o">[</span>
      <span class="o">{</span>
        <span class="nv">name</span>  <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">NAME</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
        <span class="nv">level</span> <span class="o">=</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">LEVEL</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span>
      <span class="o">}</span>
   <span class="o">]</span><span class="p">;</span>

<span class="o">}</span>
<span class="nv">obs</span> <span class="o">=</span> fcst<span class="p">;</span>

////////////////////////////////////////////////////////////////////////////////

//
// Climatology data
//
<span class="nv">climo_mean</span> <span class="o">=</span> <span class="o">{</span>

   <span class="nv">file_name</span> <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
   <span class="nv">field</span>     <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>

   <span class="nv">regrid</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nv">method</span>     <span class="o">=</span> NEAREST<span class="p">;</span>
      <span class="nv">width</span>      <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
      <span class="nv">vld_thresh</span> <span class="o">=</span> <span class="m">0</span>.5<span class="p">;</span>
      <span class="nv">shape</span>      <span class="o">=</span> SQUARE<span class="p">;</span>
   <span class="o">}</span>

   <span class="nv">time_interp_method</span> <span class="o">=</span> DW_MEAN<span class="p">;</span>
   <span class="nv">day_interval</span>       <span class="o">=</span> <span class="m">31</span><span class="p">;</span>
   <span class="nv">hour_interval</span>      <span class="o">=</span> <span class="m">6</span><span class="p">;</span>
<span class="o">}</span>

<span class="nv">climo_stdev</span> <span class="o">=</span> climo_mean<span class="p">;</span>
<span class="nv">climo_stdev</span> <span class="o">=</span> <span class="o">{</span>
   <span class="nv">file_name</span> <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
<span class="o">}</span>

////////////////////////////////////////////////////////////////////////////////

//
// Confidence interval settings
//
<span class="nv">ci_alpha</span>  <span class="o">=</span> <span class="o">[</span> <span class="m">0</span>.05 <span class="o">]</span><span class="p">;</span>

<span class="nv">boot</span> <span class="o">=</span> <span class="o">{</span>
   <span class="nv">interval</span> <span class="o">=</span> PCTILE<span class="p">;</span>
   <span class="nv">rep_prop</span> <span class="o">=</span> <span class="m">1</span>.0<span class="p">;</span>
   <span class="nv">n_rep</span>    <span class="o">=</span> <span class="m">0</span><span class="p">;</span>
   <span class="nv">rng</span>      <span class="o">=</span> <span class="s2">&quot;mt19937&quot;</span><span class="p">;</span>
   <span class="nv">seed</span>     <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="o">}</span>

////////////////////////////////////////////////////////////////////////////////

//
// Verification masking regions
//
<span class="nv">mask</span> <span class="o">=</span> <span class="o">{</span>
   <span class="nv">grid</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
   <span class="nv">poly</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="o">}</span>

//
// Number of grid points to be processed concurrently.  Set smaller to use
// less memory but increase the number of passes through the data.
//
<span class="nv">block_size</span> <span class="o">=</span> <span class="m">4000</span><span class="p">;</span>

//
// Ratio of valid matched pairs to compute statistics <span class="k">for</span> a grid point
//
<span class="nv">vld_thresh</span> <span class="o">=</span> <span class="m">1</span>.0<span class="p">;</span>

////////////////////////////////////////////////////////////////////////////////

//
// Statistical output types
//
<span class="nv">output_stats</span> <span class="o">=</span> <span class="o">{</span>
   <span class="nv">fho</span>    <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
   <span class="nv">ctc</span>    <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
   <span class="nv">cts</span>    <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
   <span class="nv">mctc</span>   <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
   <span class="nv">mcts</span>   <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
   <span class="nv">cnt</span>    <span class="o">=</span> <span class="si">${</span><span class="nv">STAT_LIST</span><span class="si">}</span><span class="p">;</span>
   <span class="nv">sl1l2</span>  <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
   <span class="nv">sal1l2</span> <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
   <span class="nv">pct</span>    <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
   <span class="nv">pstd</span>   <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
   <span class="nv">pjc</span>    <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
   <span class="nv">prc</span>    <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
<span class="o">}</span>

////////////////////////////////////////////////////////////////////////////////

<span class="nv">rank_corr_flag</span> <span class="o">=</span> FALSE<span class="p">;</span>
<span class="nv">tmp_dir</span>        <span class="o">=</span> <span class="s2">&quot;/tmp&quot;</span><span class="p">;</span>
//version        <span class="o">=</span> <span class="s2">&quot;V9.0&quot;</span><span class="p">;</span>

////////////////////////////////////////////////////////////////////////////////
</pre></div>
</div>
<p>See the following files for more information about the environment variables set in these configuration files.</p>
<p>parm/use_cases/met_tool_wrapper/TCPairs/TCPairs.py</p>
</div>
<div class="section" id="running-metplus">
<h2>Running METplus<a class="headerlink" href="#running-metplus" title="Permalink to this headline">¶</a></h2>
<p>This use case can be run two ways:</p>
<p>1) Passing in TCStat_SeriesAnalysis_fcstGFS_obsGFS_FeatureRelative_SeriesByLead_PyEmbed_IVT.conf
then a user-specific system configuration file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>master_metplus.py <span class="se">\</span>
-c /path/to/METplus/parm/use_cases/model_applications/medium_range/TCStat_SeriesAnalysis_fcstGFS_obsGFS_FeatureRelative_SeriesByLead_PyEmbed_IVT.conf <span class="se">\</span>
-c /path/to/user_system.conf
</pre></div>
</div>
<ol class="arabic" start="2">
<li><p>Modifying the configurations in parm/metplus_config, then passing in TCStat_SeriesAnalysis_fcstGFS_obsGFS_FeatureRelative_SeriesByLead_PyEmbed_IVT.conf:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>master_metplus.py <span class="se">\</span>
-c /path/to/METplus/parm/use_cases/model_applications/medium_range/TCStat_SeriesAnalysis_fcstGFS_obsGFS_FeatureRelative_SeriesByLead_PyEmbed_IVT.conf
</pre></div>
</div>
</li>
</ol>
<p>The former method is recommended. Whether you add them to a user-specific configuration file or modify the metplus_config files, the following variables must be set correctly:</p>
<ul class="simple">
<li><p><strong>INPUT_BASE</strong> - Path to directory where sample data tarballs are unpacked (See Datasets section to obtain tarballs). This is not required to run METplus, but it is required to run the examples in parm/use_cases</p></li>
<li><p><strong>OUTPUT_BASE</strong> - Path where METplus output will be written. This must be in a location where you have write permissions</p></li>
<li><p><strong>MET_INSTALL_DIR</strong> - Path to location where MET is installed locally</p></li>
</ul>
<blockquote>
<div><p>and for the [exe] section, you will need to define the location of NON-MET executables.
If the executable is in the user’s path, METplus will find it from the name.
If the executable is not in the path, specify the full path to the executable here (i.e. RM = /bin/rm)
The following executables are required for performing series analysis use cases:</p>
</div></blockquote>
<p>Example User Configuration File:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>dir<span class="o">]</span>
<span class="nv">INPUT_BASE</span> <span class="o">=</span> /path/to/sample/input/data
<span class="nv">OUTPUT_BASE</span> <span class="o">=</span> /path/to/output/dir
<span class="nv">MET_INSTALL_DIR</span> <span class="o">=</span> /path/to/met-X.Y

<span class="o">[</span>exe<span class="o">]</span>
<span class="nv">RM</span> <span class="o">=</span> /path/to/rm
<span class="nv">CUT</span> <span class="o">=</span> /path/to/cut
<span class="nv">TR</span> <span class="o">=</span> /path/to/tr
<span class="nv">NCAP2</span> <span class="o">=</span> /path/to/ncap2
<span class="nv">CONVERT</span> <span class="o">=</span> /path/to/convert
<span class="nv">NCDUMP</span> <span class="o">=</span> /path/to/ncdump
</pre></div>
</div>
</div>
<div class="section" id="expected-output">
<h2>Expected Output<a class="headerlink" href="#expected-output" title="Permalink to this headline">¶</a></h2>
<p>A successful run will output the following both to the screen and to the logfile:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>INFO: METplus has successfully finished running.
</pre></div>
</div>
<p>Refer to the value set for <strong>OUTPUT_BASE</strong> to find where the output data was generated.
Output for this use case will be found in subdirectories of the ‘series_analysis_lead’ directory (relative to <strong>OUTPUT_BASE</strong>):</p>
<ul class="simple">
<li><p>series_animate</p></li>
<li><p>series_F090</p></li>
<li><p>series_F096</p></li>
<li><p>series_F102</p></li>
<li><p>series_F108</p></li>
<li><p>series_F114</p></li>
</ul>
<div class="line-block">
<div class="line">The series_animate directory contains the animations of the series analysis in .gif format for all variable, level, and statistics combinations:</div>
</div>
<blockquote>
<div><p>series_animate_&lt;varname&gt;_&lt;level&gt;_&lt;stat&gt;.gif</p>
</div></blockquote>
<div class="line-block">
<div class="line">The series_FHHH directories contains files that have the following format:</div>
</div>
<blockquote>
<div><p>ANLY_FILES_FHHH</p>
<p>FCST_ASCII_FILES_FHHH</p>
<p>series_FHHH_&lt;varname&gt;_&lt;level&gt;_&lt;stat&gt;.png</p>
<p>series_FHHH_&lt;varname&gt;_&lt;level&gt;_&lt;stat&gt;.ps</p>
<p>series_FHHH_&lt;varname&gt;_&lt;level&gt;_&lt;stat&gt;.nc</p>
<p>Where:</p>
<blockquote>
<div><p><strong>HHH</strong> is the forecast hour/lead time in hours</p>
<p><strong>varname</strong> is the variable of interest, as specified in the METplus series_by_lead_all_fhrs config file</p>
<p><strong>level</strong>  is the level of interest, as specified in the METplus series_by_lead_all_fhrs config file</p>
<p><strong>stat</strong> is the statistic of interest, as specified in the METplus series_by_lead_all_fhrs config file.</p>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="keywords">
<h2>Keywords<a class="headerlink" href="#keywords" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference external" href="https://dtcenter.github.io/METplus/search.html?q=TCPairsToolUseCase&amp;check_keywords=yes&amp;area=default">TCPairsToolUseCase</a>,
<a class="reference external" href="https://dtcenter.github.io/METplus/search.html?q=SeriesByLeadUseCase&amp;check_keywords=yes&amp;area=default">SeriesByLeadUseCase</a>,
<a class="reference external" href="https://dtcenter.github.io/METplus/search.html?q=TCStatToolUseCase&amp;check_keywords=yes&amp;area=default">TCStatToolUseCase</a>,
<a class="reference external" href="https://dtcenter.github.io/METplus/search.html?q=RegridDataPlaneToolUseCase&amp;check_keywords=yes&amp;area=default">RegridDataPlaneToolUseCase</a>,
<a class="reference external" href="https://dtcenter.github.io/METplus/search.html?q=PyEmbedIngestToolUseCase&amp;check_keywords=yes&amp;area=default">PyEmbedIngestToolUseCase</a>,
<a class="reference external" href="https://dtcenter.github.io/METplus/search.html?q=MediumRangeAppUseCase&amp;check_keywords=yes&amp;area=default">MediumRangeAppUseCase</a>,
<a class="reference external" href="https://dtcenter.github.io/METplus/search.html?q=SeriesAnalysisUseCase&amp;check_keywords=yes&amp;area=default">SeriesAnalysisUseCase</a>,
<a class="reference external" href="https://dtcenter.github.io/METplus/search.html?q=GRIB2FileUseCase&amp;check_keywords=yes&amp;area=default">GRIB2FileUseCase</a>,
<a class="reference external" href="https://dtcenter.github.io/METplus/search.html?q=FeatureRelativeUseCase&amp;check_keywords=yes&amp;area=default">FeatureRelativeUseCase</a>,
<a class="reference external" href="https://dtcenter.github.io/METplus/search.html?q=SBUOrgUseCase&amp;check_keywords=yes&amp;area=default">SBUOrgUseCase</a>
<a class="reference external" href="https://dtcenter.github.io/METplus/search.html?q=DiagnosticsUseCase&amp;check_keywords=yes&amp;area=default">DiagnosticsUseCase</a></p>
</div>


<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-generated-model-applications-medium-range-tcstat-seriesanalysis-fcstgfs-obsgfs-featurerelative-seriesbylead-pyembed-ivt-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">

</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">

</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../precipitation/MTD_fcstHRRR-TLE_obsMRMS.html" class="btn btn-neutral float-right" title="5.2.5.1. MTD: 6hr QPF Use Case" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="PointStat_fcstGFS_obsNAM_Sfc_MultiField_PrepBufr.html" class="btn btn-neutral" title="5.2.4.6. Point-Stat: Standard Verification for CONUS Surface" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, UCAR/NCAR, NOAA, CSU/CIRA, and CU/CIRES.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
 
<script>var version_json_loc = "../../../../versions.json";</script>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script src="../../../_static/pop_ver.js"></script>
    

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>