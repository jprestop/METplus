

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4. Instructions for the Conda Environment &mdash; METplus develop documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://dtcenter.github.io/METplus/latest/Contributors_Guide/conda_env.html"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="METplus develop documentation" href="../index.html"/>
        <link rel="up" title="Contributor’s Guide" href="index.html"/>
        <link rel="next" title="5. Deprecating an Old Config Variable" href="deprecation.html"/>
        <link rel="prev" title="3. How to Create Your Own Wrapper" href="create_wrapper.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> METplus
          

          
            
            <img src="../_static/METplus_logo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                
                  develop
                
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">METplus Wrappers Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Users_Guide/index.html">User’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Contributor’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="coding_standards.html">1. Coding Standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic_components.html">2. Basic Components of METplus Python Wrappers</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_wrapper.html">3. How to Create Your Own Wrapper</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4. Instructions for the Conda Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="deprecation.html">5. Deprecating an Old Config Variable</a></li>
<li class="toctree-l2"><a class="reference internal" href="github_workflow.html">6. GitHub Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">7. Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="add_use_case.html">8. Adding Use Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="documentation.html">9. Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">METplus</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Contributor’s Guide</a> &raquo;</li>
        
      <li><span class="section-number">4. </span>Instructions for the Conda Environment</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Contributors_Guide/conda_env.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="instructions-for-the-conda-environment">
<h1><span class="section-number">4. </span>Instructions for the Conda Environment<a class="headerlink" href="#instructions-for-the-conda-environment" title="Permalink to this headline">¶</a></h1>
<p><strong>Overview:  Replicating the Python 3.6.3 environment for running METplus</strong></p>
<p>If your host (i.e. the computer on which you running METplus and MET tools) doesn’t already have all the
necessary packages installed, we recommend that you run METplus within a conda environment. This enables you to manage
dependencies and to isolate the METplus version of Python from your other Python applications.</p>
<p>To replicate the packages used in the development of METplus, use the environments.yml file to
recreate the Python environment used by METplus. This file is found at the top-level dirctory of the
METplus source code:</p>
<blockquote>
<div><p>METplus/environments.yml</p>
</div></blockquote>
<p><strong>Pre-condition- installing the conda package manager if it doesn’t exist</strong></p>
<p>** <em>You will only need to follow these instructions once.</em> **</p>
<p>1. First, you will need to download <strong>miniconda3</strong> from the Miniconda/Continuum Analytics web site (this is a minimal installer that contains the
package manager, <em>conda</em> that has Python 3 and other dependent packages.)</p>
<p>If it doesn’t exist on your computer, download it from:</p>
<blockquote>
<div><p><a class="reference external" href="https://conda.io/en/latest/miniconda.html">https://conda.io/en/latest/miniconda.html</a></p>
</div></blockquote>
<p>2. Select the appropriate Python 3.7 (or newer) version for your operating system and computer’s architecture.
Follow the installation instructions:</p>
<blockquote>
<div><p><a class="reference external" href="https://conda.io/projects/conda/en/latest/user-guide/install/index.html">https://conda.io/projects/conda/en/latest/user-guide/install/index.html</a></p>
</div></blockquote>
<p><em>Note:</em></p>
<p>You may want to consider changing the default installation location to a partition with more space.
From the command line, enter:</p>
<blockquote>
<div><p><em>df -h</em></p>
</div></blockquote>
<p>to see how much space is available on the disk partitions on your computer/host.</p>
<p>3.When queried whether to run initialization:</p>
<blockquote>
<div><p><em>Do you wish the installer to initialize Miniconda3 by running conda init?</em></p>
</div></blockquote>
<p>Enter ‘yes’.  This allows <em>conda</em> to append your .bashrc file so that when you invoke the bash shell,
you are automatically placed in a conda ‘base’environment.  This base environment is a very simple,
minimal environment that has Python 3.7 (or whatever version of Python 3 that you selected in step 2 above) and a
few other basic Python packages.  From this base environment, one can readily activate other conda
envs.  For instance, if you are working on a project that uses Python 3.5, and another project that requires
Python 3.6, you can create two conda envs, one for Python 3.5 and the other for Python 3.6 and simply
activate and work within the desired conda env.</p>
<p><strong>Creating the METplus conda env</strong></p>
<p>** <em>You will only need to follow these instructions once.</em> **</p>
<p>After you have created the METplus conda env, you will
only need to activate the conda env to run your METplus applications and deactivate to end.</p>
<div class="line-block">
<div class="line">1. Start up your base environment by changing to the bash shell.  You will see something like this:</div>
<div class="line-block">
<div class="line"><em>(base)username&#64;host:</em></div>
</div>
</div>
<p>where the (base) indicates that you are at the base conda environment which contains the basic
packages for the version of Python (corresponding to your miniconda3 installation).</p>
<div class="line-block">
<div class="line"><em>Note: Your prompt may vary, based on how your system administrator set up your account.</em></div>
</div>
<p>2.  Recreate the Python 3.x environment used for METplus via the environment.yml file found in the repository under the
METplus directory:</p>
<blockquote>
<div><p><em>conda env create -f environment.yml</em></p>
</div></blockquote>
<p>This may take a few minutes to install all the packages specified in the environment.yml file.</p>
<ol class="arabic" start="3">
<li><p>Activate the environment.  From the (base) prompt, enter:</p>
<blockquote>
<div><p><em>conda activate name-of-env</em></p>
<dl class="simple">
<dt>where name-of-env is found at the top of the environment.yml file</dt><dd><p>e.g. <em>mini3.6.3</em></p>
</dd>
</dl>
</div></blockquote>
</li>
<li><p>Run your METplus applications in this conda env.</p></li>
<li><p>When finished, deactivate the environment:</p>
<blockquote>
<div><p><em>conda deactivate</em></p>
</div></blockquote>
</li>
</ol>
<p><strong>Activating and deactivating the METplus conda env</strong></p>
<p>Once you have followed the instructions under the “Creating the METplus conda env”, you can follow these instructions
to start running METplus :</p>
<div class="line-block">
<div class="line">1.  Start up the base environment by changing to the bash shell.  You will see something like this</div>
</div>
<blockquote>
<div><p><em>(base)username&#64;host:</em></p>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><em>Note:  Your prompt may vary, based on how your sys admin set up your account.</em></div>
<div class="line"><br /></div>
</div>
<ol class="arabic" start="2">
<li><p>Activate the environment.  From the (base) prompt, enter:</p>
<blockquote>
<div><p><em>conda activate name-of-env</em></p>
</div></blockquote>
</li>
</ol>
<p>where <strong>name-of-env</strong> is found at the top of the environment.yml file</p>
<blockquote>
<div><p>e.g. <em>mini3.6.3</em></p>
</div></blockquote>
<p>You can also find the name of the conda env by entering the following:</p>
<blockquote>
<div><p><em>conda env list</em></p>
</div></blockquote>
<p>to get a list of all the available conda envs.</p>
<hr class="docutils" />
<p><strong>Optional: Checking for missing packages and mismatched version</strong></p>
<p>If you are curious, you can check for missing and mismatched packages by running the check_python.py script in the METplus directory:</p>
<blockquote>
<div><p><em>python check_python.py</em></p>
</div></blockquote>
<p>The results are sent to stdout (screen) and three files are created:</p>
<blockquote>
<div><ul class="simple">
<li><p>actual.txt:</p>
<ul>
<li><p>A list of Python packages that are on your host</p></li>
</ul>
</li>
<li><p>missing_packages.txt:</p>
<ul>
<li><p>A list of Python packages needed for METplus but not found on your host</p></li>
</ul>
</li>
<li><p>mismatched.txt:</p>
<ul>
<li><p>A list of Python packages on your host but with different version than what is used by METplus</p></li>
</ul>
</li>
</ul>
</div></blockquote>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="deprecation.html" class="btn btn-neutral float-right" title="5. Deprecating an Old Config Variable" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="create_wrapper.html" class="btn btn-neutral" title="3. How to Create Your Own Wrapper" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, UCAR/NCAR, NOAA, CSU/CIRA, and CU/CIRES.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
     
<script>var version_json_loc = "../../versions.json";</script>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/pop_ver.js"></script>
    

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>